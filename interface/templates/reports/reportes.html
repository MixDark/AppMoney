{% extends 'layout/base.html' %}
{% block title %}Reporte Financiero{% endblock %}
{% block content %}
<div class="fluent-card p-10 max-w-5xl w-full flex flex-col items-center">
    <h2 class="text-3xl font-black mb-8 text-center uppercase tracking-tight">Reportes del mes: {{ mes_mostrar }}</h2>

    <form method="get" class="flex flex-wrap gap-4 items-center mb-12 justify-center w-full">
        <input type="month" name="mes" value="{{ mes_actual }}" class="input-glass max-w-[200px] h-12">
        <button type="submit" class="btn-fluent h-12 px-6">
            <i class="fas fa-eye"></i> Ver
        </button>
        <a href="/exportar_pdf?mes={{ mes_actual }}" class="btn-fluent btn-red h-12 px-6 flex items-center gap-2">
            <i class="fas fa-file-pdf"></i> PDF
        </a>
        <a href="/exportar_excel?mes={{ mes_actual }}" class="btn-fluent btn-green h-12 px-6 flex items-center gap-2">
            <i class="fas fa-file-excel"></i> Excel
        </a>
    </form>

    <div class="grid grid-cols-3 gap-8 w-full mb-12 text-center">
        <div class="bg-green-50/50 p-4 rounded-2xl border border-green-100">
            <p class="text-[10px] font-black uppercase tracking-widest opacity-40 mb-1">Total Ingresos</p>
            <p class="text-xl font-black text-green-700">$ {{ total_ingresos|format_money }}</p>
        </div>
        <div class="bg-red-50/50 p-4 rounded-2xl border border-red-100">
            <p class="text-[10px] font-black uppercase tracking-widest opacity-40 mb-1">Total Gastos</p>
            <p class="text-xl font-black text-red-700">$ {{ total_gastos|format_money }}</p>
        </div>
        <div class="bg-blue-50/50 p-4 rounded-2xl border border-blue-100">
            <p class="text-[10px] font-black uppercase tracking-widest opacity-40 mb-1">Total Inversiones</p>
            <p class="text-xl font-black text-blue-700">$ {{ total_inversiones|format_money }}</p>
        </div>
    </div>

    <!-- Tabla de Ingresos -->
    <div class="mb-10 w-full">
        <h3 class="text-[11px] font-black uppercase tracking-widest mb-4 text-green-700">Ingresos</h3>
        <div class="overflow-x-auto bg-white/40 rounded-2xl border border-white/20">
            <table class="w-full text-[13px]">
                <thead>
                    <tr class="bg-black/5">
                        <th class="px-6 py-4 text-left font-black uppercase tracking-widest text-[10px]">Fecha</th>
                        <th class="px-6 py-4 text-left font-black uppercase tracking-widest text-[10px]">Descripción
                        </th>
                        <th class="px-6 py-4 text-right font-black uppercase tracking-widest text-[10px]">Monto</th>
                    </tr>
                </thead>
                <tbody class="font-semibold">
                    {% for ingreso in ingresos %}
                    <tr class="border-t border-black/5">
                        <td class="px-6 py-4 opacity-70">{{ ingreso.fecha|format_date }}</td>
                        <td class="px-6 py-4">{{ ingreso.descripcion }}</td>
                        <td class="px-6 py-4 text-right text-green-700 font-black">$ {{ ingreso.monto|format_money }}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="3" class="px-6 py-8 text-center opacity-40 italic">No hay registros</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Tabla de Gastos -->
    <div class="mb-10 w-full">
        <h3 class="text-[11px] font-black uppercase tracking-widest mb-4 text-red-700">Gastos</h3>
        <div class="overflow-x-auto bg-white/40 rounded-2xl border border-white/20">
            <table class="w-full text-[13px]">
                <thead>
                    <tr class="bg-black/5">
                        <th class="px-6 py-4 text-left font-black uppercase tracking-widest text-[10px]">Fecha</th>
                        <th class="px-6 py-4 text-left font-black uppercase tracking-widest text-[10px]">Descripción
                        </th>
                        <th class="px-6 py-4 text-right font-black uppercase tracking-widest text-[10px]">Monto</th>
                    </tr>
                </thead>
                <tbody class="font-semibold">
                    {% for gasto in gastos %}
                    <tr class="border-t border-black/5">
                        <td class="px-6 py-4 opacity-70">{{ gasto.fecha|format_date }}</td>
                        <td class="px-6 py-4">{{ gasto.descripcion }}</td>
                        <td class="px-6 py-4 text-right text-red-700 font-black">$ {{ gasto.monto|format_money }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="3" class="px-6 py-8 text-center opacity-40 italic">No hay registros</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Tabla de Inversiones -->
    <div class="mb-10 w-full">
        <h3 class="text-[11px] font-black uppercase tracking-widest mb-4 text-blue-700">Inversiones</h3>
        <div class="overflow-x-auto bg-white/40 rounded-2xl border border-white/20">
            <table class="w-full text-[13px]">
                <thead>
                    <tr class="bg-black/5">
                        <th class="px-6 py-4 text-left font-black uppercase tracking-widest text-[10px]">Fecha</th>
                        <th class="px-6 py-4 text-left font-black uppercase tracking-widest text-[10px]">Descripción
                        </th>
                        <th class="px-6 py-4 text-right font-black uppercase tracking-widest text-[10px]">Monto</th>
                    </tr>
                </thead>
                <tbody class="font-semibold">
                    {% for inv in inversiones %}
                    <tr class="border-t border-black/5">
                        <td class="px-6 py-4 opacity-70">{{ inv.fecha|format_date }}</td>
                        <td class="px-6 py-4">{{ inv.descripcion }}</td>
                        <td class="px-6 py-4 text-right text-blue-700 font-black">$ {{ inv.monto|format_money }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="3" class="px-6 py-8 text-center opacity-40 italic">No hay registros</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}